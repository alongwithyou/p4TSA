# Travis CI  
# (C) 2017 Elena Cuoco


env:
  global:
    - CI_NODE_TOTAL=7
    - MAKEFLAGS="-j 7"



sudo: required

before_install:
  - export ENV_ROOT="${TRAVIS_BUILD_DIR}/NewEnv"
  - export ENV_TMP="${TRAVIS_BUILD_DIR}/tmp"
  - sudo apt-get install libboost-dev libfftw3-dev
  - cd ${TRAVIS_BUILD_DIR}
  - ./install_dependencies.sh

# Test matrix:

# - Build matrix per compiler and language version

# - clang 3.4 (C++11), 3.7 (C++11/C++14), GCC 5.1(C++11)
matrix:
  include:
    # Test clang-3.7:  C++11
    - env: CLANG_VERSION=3.7 CPP=11 LIBCXX=On
      os: linux
      addons: &clang37
        apt:
          packages:
            - clang-3.7
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise

    # Test clang-3.7:  C++14
    - env: CLANG_VERSION=3.7 CPP=14 LIBCXX=On
      os: linux
      addons: *clang37

    # Test gcc-5.0: C++11
    - env: GCC_VERSION=5 CPP=11 LIBCXX=Off
      os: linux
      addons: &gcc5
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    # Test gcc-5.0: C++14
    - env: GCC_VERSION=5 CPP=14 LIBCXX=Off
      os: linux
      addons: *gcc5

# Build steps
script:
# Go to the Root directory
  - cd ${TRAVIS_BUILD_DIR}
  - cmake CMakeLists.txt
  - make
  - make install
### install python package
language: python
python:
  - "3.6"
script:
  - pip install -r requirements.txt
  - cd python-wrapper
  - python setup.py install
# command to run tests
  - python setup.py test
  - cd pyWDF
  - python setup.py install




